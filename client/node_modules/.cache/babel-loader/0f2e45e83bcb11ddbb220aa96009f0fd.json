{"ast":null,"code":"var _jsxFileName = \"/Volumes/Transcend/Projects/NayabN_AzzkaNoor/SlotMachine/slotmachine/src/pages/Spin/Spin.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\nimport BackgroundImage from '../../components/BackgroundImage/BackgroundImage';\nimport \"./Spin.scss\";\nimport { apiUrl } from \"../../constants\";\nimport axios from 'axios';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\";\nimport { FormCheckbox, FormInput, Container, Row, Col, Button } from \"shards-react\";\nimport $ from \"jquery\";\n\nclass Spin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      affiliatedWithNapaStore: false,\n      anInstallerCustomer: false,\n      napaNewElectrical: false,\n      wilson: false,\n      premiumPlus: false,\n      premiumSteering: false,\n      powerSupport: false,\n      newSteering: false,\n      items: ['item1.png', 'item2.png', 'item3.png', 'item4.png', 'item5.png']\n    };\n    this.credits = 15;\n    this.spinning = 3;\n    this.spinCounts = [0, 0, 0];\n    this.slotsTypes = {\n      'cherry': [2, 5, 10],\n      'orange': [0, 15, 30],\n      'prune': [0, 40, 50],\n      'bell': [0, 50, 80],\n      'bar1': [0, 0, 100],\n      'bar2': [0, 0, 150],\n      'bar3': [0, 0, 250],\n      'seven': [0, 0, 500],\n      'anybar': [0, 0, 80]\n    };\n    this.slots = [['orange', 'bell', 'orange', 'bar2', 'prune', 'orange', 'bar3', 'prune', 'orange', 'bar1', 'bell', 'cherry', 'orange', 'prune', 'bell', 'bar1', 'cherry', 'seven', 'orange', 'prune', 'orange', 'bell', 'orange'], ['cherry', 'prune', 'orange', 'bell', 'bar1', 'cherry', 'prune', 'bar3', 'cherry', 'bell', 'orange', 'bar1', 'seven', 'cherry', 'bar2', 'cherry', 'bell', 'prune', 'cherry', 'orange', 'cherry', 'prune', 'orange'], ['cherry', 'orange', 'bell', 'prune', 'bar2', 'cherry', 'prune', 'orange', 'bar3', 'cherry', 'bell', 'orange', 'cherry', 'orange', 'cherry', 'prune', 'bar1', 'seven', 'bell', 'cherry', 'cherry', 'orange', 'bell']];\n\n    this.stopSpin = slot => {\n      $('.wheel' + slot).find('img:last').hide().end().find('img:first').animate({\n        top: -this.spinCounts[slot - 1] * 44\n      }, {\n        duration: 500,\n        easing: 'elasticOut',\n        complete: function () {\n          this.spinning--;\n\n          if (this.spinning <= 0) {\n            this.endSpin();\n          }\n        }\n      });\n    };\n\n    this.endSpin = () => {\n      var slotType = this.slots[0][this.spinCounts[0]],\n          matches = 1,\n          barMatch = /bar/.test(slotType) ? 1 : 0,\n          winnedCredits = 0,\n          waitToSpin = 10;\n\n      if (slotType == this.slots[1][this.spinCounts[1]]) {\n        matches++;\n\n        if (slotType == this.slots[2][this.spinCounts[2]]) {\n          matches++;\n        } else if (barMatch != 0 && /bar/.test(this.slots[2][this.spinCounts[2]])) {\n          barMatch++;\n        }\n      } else if (barMatch != 0 && /bar/.test(this.slots[1][this.spinCounts[1]])) {\n        barMatch++;\n\n        if (/bar/.test(this.slots[2][this.spinCounts[2]])) {\n          barMatch++;\n        }\n      }\n\n      if (matches != 3 && barMatch == 3) {\n        slotType = 'anybar';\n        matches = 3;\n      }\n\n      var winnedCredits = this.slotsTypes[slotType][matches - 1];\n\n      if (winnedCredits > 0) {\n        // addCredit(winnedCredits);\n        waitToSpin = 410 + winnedCredits;\n      }\n\n      setTimeout(function () {\n        if (this.credits == 0) {\n          this.endSlot();\n        } else {\n          $('#slot-trigger').removeClass('slot-triggerDisabled');\n          this.spinning = false;\n        }\n      }, waitToSpin);\n    };\n\n    this.spin = () => {\n      // this.blur();\n      debugger;\n\n      if (this.spinning == false) {\n        $('#slot-machine .arm').animate({\n          top: '45px',\n          height: '2%'\n        });\n        $('#slot-machine .arm .knob').animate({\n          top: '-20px',\n          height: '20px'\n        });\n        $('#slot-machine .arm-shadow').animate({\n          top: '40px'\n        }, 380);\n        $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({\n          top: '50%',\n          opacity: 1\n        });\n        this.spinning = 3;\n        this.credits--;\n        $('#slot-credits').html(this.credits);\n        this.spinCounts[0] = parseInt(Math.random() * 23);\n        this.spinCounts[1] = parseInt(Math.random() * 23);\n        this.spinCounts[2] = parseInt(Math.random() * 23);\n        $('#slot-trigger').addClass('slot-triggerDisabled');\n        $('img.slotSpinAnimation').show();\n        $('#wheel1 img:first').css('top', -(this.spinCounts[0] * 44 + 16) + 'px');\n        $('#wheel2 img:first').css('top', -(this.spinCounts[1] * 44 + 16) + 'px');\n        $('#wheel3 img:first').css('top', -(this.spinCounts[2] * 44 + 16) + 'px');\n        setTimeout(() => {\n          $('#slot-machine .arm').animate({\n            top: '-25px',\n            height: '50%',\n            overflow: 'visible'\n          });\n          $('#slot-machine .arm .knob').animate({\n            top: '-15px',\n            height: '16px'\n          });\n          $('#slot-machine .arm-shadow').animate({\n            top: '13px'\n          });\n          $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({\n            top: '0',\n            opacity: 0\n          });\n        }, 500);\n        setTimeout(() => {\n          this.stopSpin(1);\n        }, 1500 + parseInt(1500 * Math.random()));\n        setTimeout(() => {\n          this.stopSpin(2);\n        }, 1500 + parseInt(1500 * Math.random()));\n        setTimeout(() => {\n          this.stopSpin(3);\n        }, 1500 + parseInt(1500 * Math.random()));\n      }\n\n      return false;\n    };\n\n    this.startSlot = () => {\n      this.spinning = false;\n      $('#slot-trigger').removeClass('slot-triggerDisabled'); // this.blur();\n\n      return false;\n    };\n\n    this.endSlot = () => {\n      $('#slot-block').show();\n      $('#slot-credits').text('VERLOREN!!!');\n      setInterval(this.blink($('#slot-credits')), 1000);\n    };\n\n    this.blink = element => {\n      if (element) {\n        element.animate({\n          opacity: 0\n        }, 200, 'linear', function () {\n          $(this).animate({\n            opacity: 1\n          }, 200);\n        });\n      }\n    };\n\n    this.startSlot();\n    $('#slot-trigger').bind('mousedown', function () {\n      $(this).addClass('slot-triggerDown');\n    }).bind('click', this.spinCounts);\n    $(document).bind('mouseup', function () {\n      $('#slot-trigger').removeClass('slot-triggerDown');\n    });\n    $('#wheel1 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n    $('#wheel2 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n    $('#wheel3 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {}\n\n  componentWillMount() {}\n\n  componentDidMount() {}\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"spin-page-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: 'spin-bg-image',\n      src: 'images/spinbackground.png',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }), React.createElement(Container, {\n      id: 'slot-wheels',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: 'wheel',\n      id: 'wheel1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }), this.state.items.map((item, key) => {\n      return React.createElement(\"img\", {\n        src: 'images/' + item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      });\n    })), React.createElement(Col, {\n      className: 'wheel',\n      id: 'wheel2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), this.state.items.map((item, key) => {\n      return React.createElement(\"img\", {\n        src: 'images/' + item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      });\n    })), React.createElement(Col, {\n      className: 'wheel',\n      id: 'wheel3',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), this.state.items.map((item, key) => {\n      return React.createElement(\"img\", {\n        src: 'images/' + item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      });\n    })))), React.createElement(\"div\", {\n      className: 'btn-container',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.spin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"SPIN NOW\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    user\n  } = state.user;\n  return {\n    user\n  };\n};\n\nexport default connect(mapStateToProps)(Spin);","map":{"version":3,"sources":["/Volumes/Transcend/Projects/NayabN_AzzkaNoor/SlotMachine/slotmachine/src/pages/Spin/Spin.js"],"names":["React","Component","connect","actions","BackgroundImage","apiUrl","axios","FormCheckbox","FormInput","Container","Row","Col","Button","$","Spin","constructor","props","state","loading","affiliatedWithNapaStore","anInstallerCustomer","napaNewElectrical","wilson","premiumPlus","premiumSteering","powerSupport","newSteering","items","credits","spinning","spinCounts","slotsTypes","slots","stopSpin","slot","find","hide","end","animate","top","duration","easing","complete","endSpin","slotType","matches","barMatch","test","winnedCredits","waitToSpin","setTimeout","endSlot","removeClass","spin","height","opacity","html","parseInt","Math","random","addClass","show","css","overflow","startSlot","text","setInterval","blink","element","bind","document","componentWillReceiveProps","nextProps","nextContext","componentWillMount","componentDidMount","render","map","item","key","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport * as actions from '../../actions';\nimport BackgroundImage from '../../components/BackgroundImage/BackgroundImage';\nimport \"./Spin.scss\";\nimport {apiUrl} from \"../../constants\";\nimport axios from 'axios';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\"\nimport {\n    FormCheckbox,\n    FormInput,\n    Container,\n    Row,\n    Col,\n    Button\n} from \"shards-react\";\nimport $ from \"jquery\";\n\nclass Spin extends Component {\n    state = {\n        loading: false,\n\n        affiliatedWithNapaStore: false,\n        anInstallerCustomer: false,\n\n        napaNewElectrical: false,\n        wilson: false,\n        premiumPlus: false,\n        premiumSteering: false,\n        powerSupport: false,\n        newSteering: false,\n\n        items: ['item1.png', 'item2.png', 'item3.png', 'item4.png', 'item5.png']\n    };\n\n    credits = 15;\n    spinning = 3;\n    spinCounts = [0, 0, 0];\n    slotsTypes = {\n        'cherry': [2, 5, 10],\n        'orange': [0, 15, 30],\n        'prune': [0, 40, 50],\n        'bell': [0, 50, 80],\n        'bar1': [0, 0, 100],\n        'bar2': [0, 0, 150],\n        'bar3': [0, 0, 250],\n        'seven': [0, 0, 500],\n        'anybar': [0, 0, 80]\n    };\n    slots = [\n        ['orange', 'bell', 'orange', 'bar2', 'prune', 'orange',\n            'bar3', 'prune', 'orange', 'bar1', 'bell', 'cherry', 'orange',\n            'prune', 'bell', 'bar1', 'cherry', 'seven', 'orange', 'prune',\n            'orange', 'bell', 'orange'],\n        ['cherry', 'prune', 'orange', 'bell', 'bar1', 'cherry', 'prune',\n            'bar3', 'cherry', 'bell', 'orange', 'bar1', 'seven', 'cherry',\n            'bar2', 'cherry', 'bell', 'prune', 'cherry', 'orange', 'cherry',\n            'prune', 'orange'],\n        ['cherry', 'orange', 'bell', 'prune', 'bar2', 'cherry', 'prune',\n            'orange', 'bar3', 'cherry', 'bell', 'orange', 'cherry', 'orange',\n            'cherry', 'prune', 'bar1', 'seven', 'bell', 'cherry', 'cherry',\n            'orange', 'bell'],\n    ];\n\n\n    constructor(props) {\n        super(props);\n\n        this.startSlot();\n\n        $('#slot-trigger')\n            .bind('mousedown', function () {\n                $(this).addClass('slot-triggerDown');\n            })\n            .bind('click', this.spinCounts);\n\n        $(document).bind('mouseup', function () {\n            $('#slot-trigger').removeClass('slot-triggerDown');\n        });\n\n        $('#wheel1 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n        $('#wheel2 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n        $('#wheel3 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentDidMount() {\n\n    }\n\n    stopSpin = (slot) => {\n        $('.wheel' + slot)\n            .find('img:last')\n            .hide()\n            .end()\n            .find('img:first')\n            .animate({\n                top: -this.spinCounts[slot - 1] * 44\n            }, {\n                duration: 500,\n                easing: 'elasticOut',\n                complete: function () {\n\n                    this.spinning--;\n\n                    if (this.spinning <= 0) {\n                        this.endSpin();\n                    }\n\n                }\n            });\n    }\n\n    endSpin = () => {\n        var slotType = this.slots[0][this.spinCounts[0]],\n            matches = 1,\n            barMatch = /bar/.test(slotType) ? 1 : 0,\n            winnedCredits = 0,\n            waitToSpin = 10;\n\n        if (slotType == this.slots[1][this.spinCounts[1]]) {\n\n            matches++;\n\n            if (slotType == this.slots[2][this.spinCounts[2]]) {\n                matches++;\n            } else if (barMatch != 0 && /bar/.test(this.slots[2][this.spinCounts[2]])) {\n                barMatch++;\n            }\n\n        } else if (barMatch != 0 && /bar/.test(this.slots[1][this.spinCounts[1]])) {\n\n            barMatch++;\n\n            if (/bar/.test(this.slots[2][this.spinCounts[2]])) {\n                barMatch++;\n            }\n\n        }\n\n        if (matches != 3 && barMatch == 3) {\n            slotType = 'anybar';\n            matches = 3;\n        }\n\n        var winnedCredits = this.slotsTypes[slotType][matches - 1];\n\n        if (winnedCredits > 0) {\n            // addCredit(winnedCredits);\n            waitToSpin = 410 + winnedCredits;\n        }\n\n        setTimeout(function () {\n\n            if (this.credits == 0) {\n                this.endSlot();\n            } else {\n                $('#slot-trigger').removeClass('slot-triggerDisabled');\n                this.spinning = false;\n            }\n\n        }, waitToSpin);\n    }\n\n    spin = () => {\n        // this.blur();\n        debugger;\n        if (this.spinning == false) {\n\n            $('#slot-machine .arm').animate({top: '45px', height: '2%'});\n            $('#slot-machine .arm .knob').animate({top: '-20px', height: '20px'});\n            $('#slot-machine .arm-shadow').animate({top: '40px'}, 380);\n            $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({top: '50%', opacity: 1});\n\n            this.spinning = 3;\n            this.credits--;\n\n            $('#slot-credits').html(this.credits);\n\n            this.spinCounts[0] = parseInt(Math.random() * 23);\n            this.spinCounts[1] = parseInt(Math.random() * 23);\n            this.spinCounts[2] = parseInt(Math.random() * 23);\n\n            $('#slot-trigger').addClass('slot-triggerDisabled');\n\n            $('img.slotSpinAnimation').show();\n\n            $('#wheel1 img:first').css('top', -(this.spinCounts[0] * 44 + 16) + 'px');\n            $('#wheel2 img:first').css('top', -(this.spinCounts[1] * 44 + 16) + 'px');\n            $('#wheel3 img:first').css('top', -(this.spinCounts[2] * 44 + 16) + 'px');\n\n            setTimeout(() => {\n                $('#slot-machine .arm').animate({top: '-25px', height: '50%', overflow: 'visible'});\n                $('#slot-machine .arm .knob').animate({top: '-15px', height: '16px'});\n                $('#slot-machine .arm-shadow').animate({top: '13px'});\n                $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({top: '0', opacity: 0});\n            }, 500);\n\n            setTimeout(() => {\n                this.stopSpin(1);\n            }, 1500 + parseInt(1500 * Math.random()));\n\n            setTimeout(() => {\n                this.stopSpin(2);\n            }, 1500 + parseInt(1500 * Math.random()));\n\n            setTimeout(() => {\n                this.stopSpin(3);\n            }, 1500 + parseInt(1500 * Math.random()));\n\n        }\n\n        return false;\n    }\n\n    startSlot = () => {\n\n        this.spinning = false;\n\n        $('#slot-trigger').removeClass('slot-triggerDisabled');\n\n        // this.blur();\n\n        return false;\n\n    }\n\n    endSlot = () => {\n\n        $('#slot-block').show();\n        $('#slot-credits').text('VERLOREN!!!');\n\n        setInterval(this.blink($('#slot-credits')), 1000);\n\n    }\n\n    blink = (element) => {\n        if (element) {\n            element.animate({opacity: 0}, 200, 'linear', function () {\n                $(this).animate({opacity: 1}, 200);\n            });\n        }\n    }\n\n    render() {\n\n\n        return (\n            <div className=\"spin-page-container\">\n                <img className={'spin-bg-image'} src={'images/spinbackground.png'}/>\n                <Container id={'slot-wheels'}>\n                    <Row>\n                        <Col className={'wheel'} id={'wheel1'}>\n                            <div className=\"overlay\"></div>\n                            {this.state.items.map((item, key) => {\n                                return (\n                                    <img src={'images/' + item}/>\n                                )\n                            })}\n                        </Col>\n                        <Col className={'wheel'} id={'wheel2'}>\n                            <div className=\"overlay\"></div>\n                            {this.state.items.map((item, key) => {\n                                return (\n                                    <img src={'images/' + item}/>\n                                )\n                            })}\n                        </Col>\n                        <Col className={'wheel'} id={'wheel3'}>\n                            <div className=\"overlay\"></div>\n                            {this.state.items.map((item, key) => {\n                                return (\n                                    <img src={'images/' + item}/>\n                                )\n                            })}\n                        </Col>\n                    </Row>\n                </Container>\n\n                <div className={'btn-container'}>\n                    <Button onClick={this.spin}>SPIN NOW</Button>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n\n    const {user} = state.user;\n    return {\n        user\n    };\n}\n\nexport default connect(mapStateToProps)(Spin);\n"]},"metadata":{},"sourceType":"module"}