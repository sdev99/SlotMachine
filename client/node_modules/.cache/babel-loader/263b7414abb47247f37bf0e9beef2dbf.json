{"ast":null,"code":"var _jsxFileName = \"/Volumes/Transcend/Projects/NayabN_AzzkaNoor/SlotMachine/slotmachine/src/pages/Spin/Spin.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\nimport BackgroundImage from '../../components/BackgroundImage/BackgroundImage';\nimport \"./Spin.scss\";\nimport { apiUrl } from \"../../constants\";\nimport axios from 'axios';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\";\nimport { FormCheckbox, FormInput, Container, Row, Col, Button } from \"shards-react\";\nimport $ from \"jquery\";\n\nclass Spin extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      affiliatedWithNapaStore: false,\n      anInstallerCustomer: false,\n      napaNewElectrical: false,\n      wilson: false,\n      premiumPlus: false,\n      premiumSteering: false,\n      powerSupport: false,\n      newSteering: false,\n      items: ['item1.png', 'item2.png', 'item3.png', 'item4.png', 'item5.png']\n    };\n    this.credits = 15;\n    this.spinning = 3;\n    this.spinCounts = [0, 0, 0];\n    this.slotsTypes = {\n      'cherry': [2, 5, 10],\n      'orange': [0, 15, 30],\n      'prune': [0, 40, 50],\n      'bell': [0, 50, 80],\n      'bar1': [0, 0, 100],\n      'bar2': [0, 0, 150],\n      'bar3': [0, 0, 250],\n      'seven': [0, 0, 500],\n      'anybar': [0, 0, 80]\n    };\n    this.slots = [['orange', 'bell', 'orange', 'bar2', 'prune', 'orange', 'bar3', 'prune', 'orange', 'bar1', 'bell', 'cherry', 'orange', 'prune', 'bell', 'bar1', 'cherry', 'seven', 'orange', 'prune', 'orange', 'bell', 'orange'], ['cherry', 'prune', 'orange', 'bell', 'bar1', 'cherry', 'prune', 'bar3', 'cherry', 'bell', 'orange', 'bar1', 'seven', 'cherry', 'bar2', 'cherry', 'bell', 'prune', 'cherry', 'orange', 'cherry', 'prune', 'orange'], ['cherry', 'orange', 'bell', 'prune', 'bar2', 'cherry', 'prune', 'orange', 'bar3', 'cherry', 'bell', 'orange', 'cherry', 'orange', 'cherry', 'prune', 'bar1', 'seven', 'bell', 'cherry', 'cherry', 'orange', 'bell']];\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {}\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    this.startSlot();\n    $('#slot-trigger').bind('mousedown', function () {\n      $(this).addClass('slot-triggerDown');\n    }).bind('click', this.spinCounts);\n    $(document).bind('mouseup', function () {\n      $('#slot-trigger').removeClass('slot-triggerDown');\n    });\n    $('#wheel1 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n    $('#wheel2 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n    $('#wheel3 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n  }\n\n  stopSpin(slot) {\n    $('.wheel' + slot).find('img:last').hide().end().find('img:first').animate({\n      top: -this.spinCounts[slot - 1] * 44\n    }, {\n      duration: 500,\n      easing: 'elasticOut',\n      complete: function () {\n        this.spinning--;\n\n        if (this.spinning <= 0) {\n          this.endSpin();\n        }\n      }\n    });\n  }\n\n  endSpin() {\n    var slotType = this.slots[0][this.spinCounts[0]],\n        matches = 1,\n        barMatch = /bar/.test(slotType) ? 1 : 0,\n        winnedCredits = 0,\n        waitToSpin = 10;\n\n    if (slotType == this.slots[1][this.spinCounts[1]]) {\n      matches++;\n\n      if (slotType == this.slots[2][this.spinCounts[2]]) {\n        matches++;\n      } else if (barMatch != 0 && /bar/.test(this.slots[2][this.spinCounts[2]])) {\n        barMatch++;\n      }\n    } else if (barMatch != 0 && /bar/.test(this.slots[1][this.spinCounts[1]])) {\n      barMatch++;\n\n      if (/bar/.test(this.slots[2][this.spinCounts[2]])) {\n        barMatch++;\n      }\n    }\n\n    if (matches != 3 && barMatch == 3) {\n      slotType = 'anybar';\n      matches = 3;\n    }\n\n    var winnedCredits = this.slotsTypes[slotType][matches - 1];\n\n    if (winnedCredits > 0) {\n      // addCredit(winnedCredits);\n      waitToSpin = 410 + winnedCredits;\n    }\n\n    setTimeout(function () {\n      if (this.credits == 0) {\n        this.endSlot();\n      } else {\n        $('#slot-trigger').removeClass('slot-triggerDisabled');\n        this.spinning = false;\n      }\n    }, waitToSpin);\n  }\n\n  spin() {\n    // this.blur();\n    if (this.spinning == false) {\n      $('#slot-machine .arm').animate({\n        top: '45px',\n        height: '2%'\n      });\n      $('#slot-machine .arm .knob').animate({\n        top: '-20px',\n        height: '20px'\n      });\n      $('#slot-machine .arm-shadow').animate({\n        top: '40px'\n      }, 380);\n      $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({\n        top: '50%',\n        opacity: 1\n      });\n      this.spinning = 3;\n      this.credits--;\n      $('#slot-credits').html(this.credits);\n      this.spinCounts[0] = parseInt(Math.random() * 23);\n      this.spinCounts[1] = parseInt(Math.random() * 23);\n      this.spinCounts[2] = parseInt(Math.random() * 23);\n      $('#slot-trigger').addClass('slot-triggerDisabled');\n      $('img.slotSpinAnimation').show();\n      $('#wheel1 img:first').css('top', -(this.spinCounts[0] * 44 + 16) + 'px');\n      $('#wheel2 img:first').css('top', -(this.spinCounts[1] * 44 + 16) + 'px');\n      $('#wheel3 img:first').css('top', -(this.spinCounts[2] * 44 + 16) + 'px');\n      setTimeout(function () {\n        $('#slot-machine .arm').animate({\n          top: '-25px',\n          height: '50%',\n          overflow: 'visible'\n        });\n        $('#slot-machine .arm .knob').animate({\n          top: '-15px',\n          height: '16px'\n        });\n        $('#slot-machine .arm-shadow').animate({\n          top: '13px'\n        });\n        $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({\n          top: '0',\n          opacity: 0\n        });\n      }, 500);\n      setTimeout(function () {\n        this.stopSpin(1);\n      }, 1500 + parseInt(1500 * Math.random()));\n      setTimeout(function () {\n        this.stopSpin(2);\n      }, 1500 + parseInt(1500 * Math.random()));\n      setTimeout(function () {\n        this.stopSpin(3);\n      }, 1500 + parseInt(1500 * Math.random()));\n    }\n\n    return false;\n  }\n\n  startSlot() {\n    this.spinning = false;\n    $('#slot-trigger').removeClass('slot-triggerDisabled'); // this.blur();\n\n    return false;\n  }\n\n  endSlot() {\n    $('#slot-block').show();\n    $('#slot-credits').text('VERLOREN!!!');\n    setInterval(this.blink($('#slot-credits')), 1000);\n  }\n\n  blink(element) {\n    if (element) {\n      element.animate({\n        opacity: 0\n      }, 200, 'linear', function () {\n        $(this).animate({\n          opacity: 1\n        }, 200);\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"spin-page-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: 'spin-bg-image',\n      src: 'images/spinbackground.png',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(Container, {\n      id: 'slot-wheels',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: 'wheel',\n      id: 'wheel1',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }), this.state.items.map((item, key) => {\n      return React.createElement(\"img\", {\n        src: 'images/' + item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      });\n    })), React.createElement(Col, {\n      className: 'wheel',\n      id: 'wheel2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), this.state.items.map((item, key) => {\n      return React.createElement(\"img\", {\n        src: 'images/' + item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      });\n    })), React.createElement(Col, {\n      className: 'wheel',\n      id: 'wheel3',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }), this.state.items.map((item, key) => {\n      return React.createElement(\"img\", {\n        src: 'images/' + item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      });\n    })))), React.createElement(\"div\", {\n      className: 'btn-container',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.spin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, \"SPIN NOW\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    user\n  } = state.user;\n  return {\n    user\n  };\n};\n\nexport default connect(mapStateToProps)(Spin);","map":{"version":3,"sources":["/Volumes/Transcend/Projects/NayabN_AzzkaNoor/SlotMachine/slotmachine/src/pages/Spin/Spin.js"],"names":["React","Component","connect","actions","BackgroundImage","apiUrl","axios","FormCheckbox","FormInput","Container","Row","Col","Button","$","Spin","state","loading","affiliatedWithNapaStore","anInstallerCustomer","napaNewElectrical","wilson","premiumPlus","premiumSteering","powerSupport","newSteering","items","credits","spinning","spinCounts","slotsTypes","slots","componentWillReceiveProps","nextProps","nextContext","componentWillMount","componentDidMount","startSlot","bind","addClass","document","removeClass","css","parseInt","Math","random","stopSpin","slot","find","hide","end","animate","top","duration","easing","complete","endSpin","slotType","matches","barMatch","test","winnedCredits","waitToSpin","setTimeout","endSlot","spin","height","opacity","html","show","overflow","text","setInterval","blink","element","render","map","item","key","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport * as actions from '../../actions';\nimport BackgroundImage from '../../components/BackgroundImage/BackgroundImage';\nimport \"./Spin.scss\";\nimport {apiUrl} from \"../../constants\";\nimport axios from 'axios';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\"\nimport {\n    FormCheckbox,\n    FormInput,\n    Container,\n    Row,\n    Col,\n    Button\n} from \"shards-react\";\nimport $ from \"jquery\";\n\nclass Spin extends Component {\n    state = {\n        loading: false,\n\n        affiliatedWithNapaStore: false,\n        anInstallerCustomer: false,\n\n        napaNewElectrical: false,\n        wilson: false,\n        premiumPlus: false,\n        premiumSteering: false,\n        powerSupport: false,\n        newSteering: false,\n\n        items: ['item1.png', 'item2.png', 'item3.png', 'item4.png', 'item5.png']\n    };\n\n    credits = 15;\n    spinning = 3;\n    spinCounts = [0, 0, 0];\n    slotsTypes = {\n        'cherry': [2, 5, 10],\n        'orange': [0, 15, 30],\n        'prune': [0, 40, 50],\n        'bell': [0, 50, 80],\n        'bar1': [0, 0, 100],\n        'bar2': [0, 0, 150],\n        'bar3': [0, 0, 250],\n        'seven': [0, 0, 500],\n        'anybar': [0, 0, 80]\n    };\n    slots = [\n        ['orange', 'bell', 'orange', 'bar2', 'prune', 'orange',\n            'bar3', 'prune', 'orange', 'bar1', 'bell', 'cherry', 'orange',\n            'prune', 'bell', 'bar1', 'cherry', 'seven', 'orange', 'prune',\n            'orange', 'bell', 'orange'],\n        ['cherry', 'prune', 'orange', 'bell', 'bar1', 'cherry', 'prune',\n            'bar3', 'cherry', 'bell', 'orange', 'bar1', 'seven', 'cherry',\n            'bar2', 'cherry', 'bell', 'prune', 'cherry', 'orange', 'cherry',\n            'prune', 'orange'],\n        ['cherry', 'orange', 'bell', 'prune', 'bar2', 'cherry', 'prune',\n            'orange', 'bar3', 'cherry', 'bell', 'orange', 'cherry', 'orange',\n            'cherry', 'prune', 'bar1', 'seven', 'bell', 'cherry', 'cherry',\n            'orange', 'bell'],\n    ];\n\n    componentWillReceiveProps(nextProps, nextContext) {\n\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentDidMount() {\n        this.startSlot();\n\n        $('#slot-trigger')\n            .bind('mousedown', function () {\n                $(this).addClass('slot-triggerDown');\n            })\n            .bind('click', this.spinCounts);\n\n        $(document).bind('mouseup', function () {\n            $('#slot-trigger').removeClass('slot-triggerDown');\n        });\n\n        $('#wheel1 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n        $('#wheel2 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n        $('#wheel3 img:first').css('top', -(parseInt(Math.random() * 23) * 44) + 'px');\n    }\n\n    stopSpin(slot) {\n        $('.wheel' + slot)\n            .find('img:last')\n            .hide()\n            .end()\n            .find('img:first')\n            .animate({\n                top: -this.spinCounts[slot - 1] * 44\n            }, {\n                duration: 500,\n                easing: 'elasticOut',\n                complete: function () {\n\n                    this.spinning--;\n\n                    if (this.spinning <= 0) {\n                        this.endSpin();\n                    }\n\n                }\n            });\n    }\n\n    endSpin() {\n        var slotType = this.slots[0][this.spinCounts[0]],\n            matches = 1,\n            barMatch = /bar/.test(slotType) ? 1 : 0,\n            winnedCredits = 0,\n            waitToSpin = 10;\n\n        if (slotType == this.slots[1][this.spinCounts[1]]) {\n\n            matches++;\n\n            if (slotType == this.slots[2][this.spinCounts[2]]) {\n                matches++;\n            } else if (barMatch != 0 && /bar/.test(this.slots[2][this.spinCounts[2]])) {\n                barMatch++;\n            }\n\n        } else if (barMatch != 0 && /bar/.test(this.slots[1][this.spinCounts[1]])) {\n\n            barMatch++;\n\n            if (/bar/.test(this.slots[2][this.spinCounts[2]])) {\n                barMatch++;\n            }\n\n        }\n\n        if (matches != 3 && barMatch == 3) {\n            slotType = 'anybar';\n            matches = 3;\n        }\n\n        var winnedCredits = this.slotsTypes[slotType][matches - 1];\n\n        if (winnedCredits > 0) {\n            // addCredit(winnedCredits);\n            waitToSpin = 410 + winnedCredits;\n        }\n\n        setTimeout(function () {\n\n            if (this.credits == 0) {\n                this.endSlot();\n            } else {\n                $('#slot-trigger').removeClass('slot-triggerDisabled');\n                this.spinning = false;\n            }\n\n        }, waitToSpin);\n    }\n\n    spin() {\n        // this.blur();\n\n        if (this.spinning == false) {\n\n            $('#slot-machine .arm').animate({top: '45px', height: '2%'});\n            $('#slot-machine .arm .knob').animate({top: '-20px', height: '20px'});\n            $('#slot-machine .arm-shadow').animate({top: '40px'}, 380);\n            $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({top: '50%', opacity: 1});\n\n            this.spinning = 3;\n            this.credits--;\n\n            $('#slot-credits').html(this.credits);\n\n            this.spinCounts[0] = parseInt(Math.random() * 23);\n            this.spinCounts[1] = parseInt(Math.random() * 23);\n            this.spinCounts[2] = parseInt(Math.random() * 23);\n\n            $('#slot-trigger').addClass('slot-triggerDisabled');\n\n            $('img.slotSpinAnimation').show();\n\n            $('#wheel1 img:first').css('top', -(this.spinCounts[0] * 44 + 16) + 'px');\n            $('#wheel2 img:first').css('top', -(this.spinCounts[1] * 44 + 16) + 'px');\n            $('#wheel3 img:first').css('top', -(this.spinCounts[2] * 44 + 16) + 'px');\n\n            setTimeout(function () {\n                $('#slot-machine .arm').animate({top: '-25px', height: '50%', overflow: 'visible'});\n                $('#slot-machine .arm .knob').animate({top: '-15px', height: '16px'});\n                $('#slot-machine .arm-shadow').animate({top: '13px'});\n                $('#slot-machine .ring1 .shadow, #slot-machine .ring2 .shadow').animate({top: '0', opacity: 0});\n            }, 500);\n\n            setTimeout(function () {\n                this.stopSpin(1);\n            }, 1500 + parseInt(1500 * Math.random()));\n\n            setTimeout(function () {\n                this.stopSpin(2);\n            }, 1500 + parseInt(1500 * Math.random()));\n\n            setTimeout(function () {\n                this.stopSpin(3);\n            }, 1500 + parseInt(1500 * Math.random()));\n\n        }\n\n        return false;\n    }\n\n    startSlot() {\n\n        this.spinning = false;\n\n        $('#slot-trigger').removeClass('slot-triggerDisabled');\n\n        // this.blur();\n\n        return false;\n\n    }\n\n    endSlot() {\n\n        $('#slot-block').show();\n        $('#slot-credits').text('VERLOREN!!!');\n\n        setInterval(this.blink($('#slot-credits')), 1000);\n\n    }\n\n    blink(element) {\n        if (element) {\n            element.animate({opacity: 0}, 200, 'linear', function () {\n                $(this).animate({opacity: 1}, 200);\n            });\n        }\n    }\n\n    render() {\n\n\n        return (\n            <div className=\"spin-page-container\">\n                <img className={'spin-bg-image'} src={'images/spinbackground.png'}/>\n                <Container id={'slot-wheels'}>\n                    <Row>\n                        <Col className={'wheel'} id={'wheel1'}>\n                            <div className=\"overlay\"></div>\n                            {this.state.items.map((item, key) => {\n                                return (\n                                    <img src={'images/' + item}/>\n                                )\n                            })}\n                        </Col>\n                        <Col className={'wheel'} id={'wheel2'}>\n                            <div className=\"overlay\"></div>\n                            {this.state.items.map((item, key) => {\n                                return (\n                                    <img src={'images/' + item}/>\n                                )\n                            })}\n                        </Col>\n                        <Col className={'wheel'} id={'wheel3'}>\n                            <div className=\"overlay\"></div>\n                            {this.state.items.map((item, key) => {\n                                return (\n                                    <img src={'images/' + item}/>\n                                )\n                            })}\n                        </Col>\n                    </Row>\n                </Container>\n\n                <div className={'btn-container'}>\n                    <Button onClick={this.spin}>SPIN NOW</Button>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n\n    const {user} = state.user;\n    return {\n        user\n    };\n}\n\nexport default connect(mapStateToProps)(Spin);\n"]},"metadata":{},"sourceType":"module"}