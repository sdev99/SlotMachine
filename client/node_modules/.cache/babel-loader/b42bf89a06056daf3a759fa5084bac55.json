{"ast":null,"code":"var _jsxFileName = \"/Volumes/Transcend/Projects/NayabN_AzzkaNoor/SlotMachine/slotmachine/src/pages/Spin/Spin.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\nimport BackgroundImage from '../../components/BackgroundImage/BackgroundImage';\nimport \"./Spin.scss\";\nimport { apiUrl } from \"../../constants\";\nimport axios from 'axios';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\";\nimport { FormCheckbox, FormInput, Container, Row, Col, Button } from \"shards-react\";\nimport $ from \"jquery\";\nconst SLOTS_PER_REEL = 12; // radius = Math.round( ( panelWidth / 2) / Math.tan( Math.PI / SLOTS_PER_REEL ) );\n// current settings give a value of 149, rounded to 150\n\nconst REEL_RADIUS = 500;\n\nclass Spin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      affiliatedWithNapaStore: false,\n      anInstallerCustomer: false,\n      napaNewElectrical: false,\n      wilson: false,\n      premiumPlus: false,\n      premiumSteering: false,\n      powerSupport: false,\n      newSteering: false,\n      items: ['item1.png', 'item2.png', 'item3.png', 'item4.png', 'item5.png']\n    };\n\n    this.createSlots = ring => {\n      var slotAngle = 360 / SLOTS_PER_REEL;\n      var seed = this.getSeed();\n      seed = 2;\n\n      for (var i = 0; i < SLOTS_PER_REEL; i++) {\n        var slot = document.createElement('div');\n        slot.className = 'slot'; // compute and assign the transform for this slot\n\n        var transform = 'rotateX(' + slotAngle * i + 'deg) translateZ(' + REEL_RADIUS + 'px)';\n        slot.style.transform = transform; // setup the number to show inside the slots\n        // the position is randomized to\n        // var content = $(slot).append('<p>' + ((seed + i) % 12) + '</p>');\n\n        var content = $(slot).append('<img src=\"./images/' + this.state.items[(seed + i) % 12] + '\" class=\"spin-item\"/>'); // add the poster to the row\n\n        ring.append(slot);\n      }\n    };\n\n    this.getSeed = () => {\n      // generate random number smaller than 13 then floor it to settle between 0 and 12 inclusive\n      return Math.floor(Math.random() * SLOTS_PER_REEL);\n    };\n\n    this.spin = () => {\n      var timer = 2; //var txt = 'seeds: ';\n\n      for (var i = 1; i < 4; i++) {\n        var oldSeed = -1;\n        /*\n        checking that the old seed from the previous iteration is not the same as the current iteration;\n        if this happens then the reel will not spin at all\n        */\n\n        var oldClass = $('#ring' + i).attr('class');\n\n        if (oldClass.length > 4) {\n          oldSeed = parseInt(oldClass.slice(10));\n          console.log(oldSeed);\n        }\n\n        var seed = this.getSeed();\n\n        while (oldSeed == seed) {\n          seed = this.getSeed();\n        }\n\n        $('#ring' + i).css('animation', 'back-spin 1s, spin-' + seed + ' ' + (timer + i * 0.5) + 's').attr('class', 'ring spin-' + seed);\n        console.log(\"seed\" + seed);\n      }\n    };\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {}\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    this.createSlots($('#ring1'));\n    this.createSlots($('#ring2'));\n    this.createSlots($('#ring3'));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"spin-page-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: 'spin-bg-image',\n      src: 'images/spinbackground.png',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"rotate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"ring1\",\n      className: \"ring\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"ring2\",\n      className: \"ring\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"ring3\",\n      className: \"ring\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'btn-container',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.spin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"SPIN NOW\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    user\n  } = state.user;\n  return {\n    user\n  };\n};\n\nexport default connect(mapStateToProps)(Spin);","map":{"version":3,"sources":["/Volumes/Transcend/Projects/NayabN_AzzkaNoor/SlotMachine/slotmachine/src/pages/Spin/Spin.js"],"names":["React","Component","connect","actions","BackgroundImage","apiUrl","axios","FormCheckbox","FormInput","Container","Row","Col","Button","$","SLOTS_PER_REEL","REEL_RADIUS","Spin","constructor","props","state","loading","affiliatedWithNapaStore","anInstallerCustomer","napaNewElectrical","wilson","premiumPlus","premiumSteering","powerSupport","newSteering","items","createSlots","ring","slotAngle","seed","getSeed","i","slot","document","createElement","className","transform","style","content","append","Math","floor","random","spin","timer","oldSeed","oldClass","attr","length","parseInt","slice","console","log","css","componentWillReceiveProps","nextProps","nextContext","componentWillMount","componentDidMount","render","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport * as actions from '../../actions';\nimport BackgroundImage from '../../components/BackgroundImage/BackgroundImage';\nimport \"./Spin.scss\";\nimport {apiUrl} from \"../../constants\";\nimport axios from 'axios';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\"\nimport {\n    FormCheckbox,\n    FormInput,\n    Container,\n    Row,\n    Col,\n    Button\n} from \"shards-react\";\nimport $ from \"jquery\";\n\nconst SLOTS_PER_REEL = 12;\n// radius = Math.round( ( panelWidth / 2) / Math.tan( Math.PI / SLOTS_PER_REEL ) );\n// current settings give a value of 149, rounded to 150\nconst REEL_RADIUS = 500;\n\nclass Spin extends Component {\n    state = {\n        loading: false,\n\n        affiliatedWithNapaStore: false,\n        anInstallerCustomer: false,\n\n        napaNewElectrical: false,\n        wilson: false,\n        premiumPlus: false,\n        premiumSteering: false,\n        powerSupport: false,\n        newSteering: false,\n\n        items: ['item1.png', 'item2.png', 'item3.png', 'item4.png', 'item5.png']\n    };\n\n\n    constructor(props) {\n        super(props);\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentDidMount() {\n        this.createSlots($('#ring1'));\n        this.createSlots($('#ring2'));\n        this.createSlots($('#ring3'));\n    }\n\n\n    createSlots = (ring) => {\n\n        var slotAngle = 360 / SLOTS_PER_REEL;\n\n        var seed = this.getSeed();\n        seed = 2;\n\n        for (var i = 0; i < SLOTS_PER_REEL; i++) {\n            var slot = document.createElement('div');\n\n            slot.className = 'slot';\n\n            // compute and assign the transform for this slot\n            var transform = 'rotateX(' + (slotAngle * i) + 'deg) translateZ(' + REEL_RADIUS + 'px)';\n\n            slot.style.transform = transform;\n\n            // setup the number to show inside the slots\n            // the position is randomized to\n\n            // var content = $(slot).append('<p>' + ((seed + i) % 12) + '</p>');\n            var content = $(slot).append('<img src=\"./images/' + this.state.items[((seed + i) % 12)] + '\" class=\"spin-item\"/>');\n\n            // add the poster to the row\n            ring.append(slot);\n        }\n    }\n\n    getSeed = () => {\n        // generate random number smaller than 13 then floor it to settle between 0 and 12 inclusive\n        return Math.floor(Math.random() * (SLOTS_PER_REEL));\n    }\n\n    spin = () => {\n        var timer = 2;\n\n        //var txt = 'seeds: ';\n        for (var i = 1; i < 4; i++) {\n            var oldSeed = -1;\n            /*\n            checking that the old seed from the previous iteration is not the same as the current iteration;\n            if this happens then the reel will not spin at all\n            */\n            var oldClass = $('#ring' + i).attr('class');\n            if (oldClass.length > 4) {\n                oldSeed = parseInt(oldClass.slice(10));\n                console.log(oldSeed);\n            }\n            var seed = this.getSeed();\n            while (oldSeed == seed) {\n                seed = this.getSeed();\n            }\n\n            $('#ring' + i)\n                .css('animation', 'back-spin 1s, spin-' + seed + ' ' + (timer + i * 0.5) + 's')\n                .attr('class', 'ring spin-' + seed);\n            console.log(\"seed\" + seed);\n        }\n\n    }\n\n\n    render() {\n\n\n        return (\n            <div className=\"spin-page-container\">\n                <img className={'spin-bg-image'} src={'images/spinbackground.png'}/>\n\n                <div id=\"rotate\">\n                    <div id=\"ring1\" className=\"ring\"></div>\n                    <div id=\"ring2\" className=\"ring\"></div>\n                    <div id=\"ring3\" className=\"ring\"></div>\n                </div>\n\n\n                <div className={'btn-container'}>\n                    <Button onClick={this.spin}>SPIN NOW</Button>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n\n    const {user} = state.user;\n    return {\n        user\n    };\n}\n\nexport default connect(mapStateToProps)(Spin);\n"]},"metadata":{},"sourceType":"module"}